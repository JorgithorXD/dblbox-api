<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DBL-BOX</title>
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <header>
        <h1>Bienvenido a DBL BOX</h1>
        <h2>Una REST API sobre el videojuego para dispositivos moviles 'Dragon Ball Legends'</h2>
    </header>
    <main>
        <h2>Algunas de las acciones que puedes realizar:</h2>
        <article class="link-to-forms">
            <ul>
                <li><a href="/form/unit">Agregar una unidad</a></li>
                <li><a href="/form/tags">Agregar un tag</a></li>
            </ul>
        </article>
        <article class="link-to-get-data">
            <ul>
                <li><a href="/data/tags">Obtener todos las etiquetas
                        <span class="clipboard-span"></span>
                        <span class="clipboard-check-span"></span>
                    </a></li>
                <li><a href="/data/chapters">Obtener todos los capitulos
                        <span class="clipboard-span"></span>
                        <span class="clipboard-check-span"></span>
                    </a>
                </li>
                <li><a href="/data/colors">Obtener todos los colores
                        <span class="clipboard-span"></span>
                        <span class="clipboard-check-span"></span>
                    </a>
                </li>
                <li><a href="/data/types">Obtener todos los tipos
                        <span class="clipboard-span"></span>
                        <span class="clipboard-check-span"></span>
                    </a>
                </li>
                <li><a href="/data/raritys">Obtener todos las rarezas
                        <span class="clipboard-span"></span>
                        <span class="clipboard-check-span"></span>
                    </a>
                </li>
                <li><a href="en/unit/all">Obtener todos los personajes
                        <span class="clipboard-span"></span>
                        <span class="clipboard-check-span"></span>
                    </a>
                </li>
            </ul>
        </article>
    </main>
</body>
<script>
    const articleGetData = document.querySelector('.link-to-get-data')
    const $a = articleGetData.querySelectorAll('a')
    const $clipSpan = document.querySelectorAll('.clipboard-span')
    const $clipCheckSpan = document.querySelectorAll('.clipboard-check-span')

    var clicks = 0, prev = null, z = 0

    $clipCheckSpan.forEach(e => {
        e.innerHTML = `
            <?xml version="1.0" encoding="UTF-8"?><svg width="24px" height="24px" stroke-width="1.5" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000"><path d="M7 12.5L10 15.5L17 8.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path><path d="M12 22C17.5228 22 22 17.5228 22 12C22 6.47715 17.5228 2 12 2C6.47715 2 2 6.47715 2 12C2 17.5228 6.47715 22 12 22Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>
            `
        e.classList.add('hide')
    })

    $clipSpan.forEach(e => {
        e.innerHTML = `
            <?xml version="1.0" encoding="UTF-8"?><svg width="24px" height="24px" viewBox="0 0 24 24" stroke-width="1.5" fill="none" xmlns="http://www.w3.org/2000/svg" color="#000000"><path d="M8.5 4H6C4.89543 4 4 4.89543 4 6V20C4 21.1046 4.89543 22 6 22H18C19.1046 22 20 21.1046 20 20V6C20 4.89543 19.1046 4 18 4H15.5" stroke="#000000" stroke-width="1.5" stroke-linecap="round"></path><path d="M8 6.4V4.5C8 4.22386 8.22386 4 8.5 4C8.77614 4 9.00422 3.77604 9.05152 3.50398C9.19968 2.65171 9.77399 1 12 1C14.226 1 14.8003 2.65171 14.9485 3.50398C14.9958 3.77604 15.2239 4 15.5 4C15.7761 4 16 4.22386 16 4.5V6.4C16 6.73137 15.7314 7 15.4 7H8.6C8.26863 7 8 6.73137 8 6.4Z" stroke="#000000" stroke-width="1.5" stroke-linecap="round"></path></svg>
            `
    })

    $a.forEach((a, i) => {
        a.addEventListener('click', function (event) {
            event.preventDefault()
            if (a != prev) { clicks = 0 }
            clicks++
            z++
            setTimeout(() => {
                if (clicks === 1) {
                    const url = this.getAttribute('href')
                    copyToClipboard(url)
                    copyNotification(z)
                }
                else if (clicks === 2) {
                    var go = this.getAttribute('href')
                    window.location = go
                }
                clicks = 0
                
            }, 500)
            prev = a
        })
    })

    function copyToClipboard(text) {
        const textarea = document.createElement('textarea')
        textarea.value = 'https://dblbox-api.3.us-1.fl0.io' + text
        document.body.appendChild(textarea)
        textarea.select()
        document.execCommand('copy')
        document.body.removeChild(textarea)
    }

    function copyNotification(z){
        const notification = document.createElement('div')
        document.querySelector('body').appendChild(notification)
        notification.style.zIndex = z
        notification.classList.add('notification-container')
        notification.innerHTML = `
        <span class = "notification-check"><?xml version="1.0" encoding="UTF-8"?><svg width="24px" height="24px" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" color="#04ff00" stroke-width="1.5"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 1.25C6.06294 1.25 1.25 6.06294 1.25 12C1.25 17.9371 6.06294 22.75 12 22.75C17.9371 22.75 22.75 17.9371 22.75 12C22.75 6.06294 17.9371 1.25 12 1.25ZM7.53044 11.9697C7.23755 11.6768 6.76268 11.6768 6.46978 11.9697C6.17689 12.2626 6.17689 12.7374 6.46978 13.0303L9.46978 16.0303C9.76268 16.3232 10.2376 16.3232 10.5304 16.0303L17.5304 9.03033C17.8233 8.73744 17.8233 8.26256 17.5304 7.96967C17.2375 7.67678 16.7627 7.67678 16.4698 7.96967L10.0001 14.4393L7.53044 11.9697Z" fill="#000000"></path></svg><div class="sc-8753d4f7-9 dqriVB"></div></span>
        <label class = "notification-text">Link copiado al portapapeles</label>
        `
        setTimeout(()=>{
            notification.remove()
        }, 3000)
    }
</script>

</html>